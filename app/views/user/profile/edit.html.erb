<div class="container mx-auto p-6">
  <h1 class="text-2xl font-bold mb-4">Profile</h1>

  <%= form_for @user, url: profile_path, method: :patch, html: { multipart: true, class: "space-y-4" } do |f| %>
    <div>
      <label class="block text-sm font-medium text-gray-700">Name</label>
      <%= f.text_field :name, class: "w-full border rounded px-3 py-2" %>
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700">Email</label>
      <%= f.email_field :email, class: "w-full border rounded px-3 py-2", readonly: true %>
    </div>

    <div>
      <label class="block text-sm font-medium text-gray-700">Avatar</label>
      <% if @user.avatar.attached? %>
        <div class="mt-2">
          <% if @user.avatar.content_type == "image/svg+xml" %>
            <!-- Display SVG as-is -->
            <%= image_tag @user.avatar, class: "w-24 h-24" %>
          <% else %>
            <!-- Process other image types -->
            <%= image_tag @user.avatar.variant(resize_to_limit: [100, 100]).processed, class: "rounded-full shadow-md" %>
          <% end %>
        </div>
      <% else %>
        <% initials = @user.email[0].upcase %>
        <div class="flex items-center justify-center rounded-full md:w-10 w-12 md:h-10 h-12 bg-primary-600 text-white font-bold text-lg">
            <%= initials %>
        </div>
      <% end %>
      <%= f.file_field :avatar, class: "w-full border rounded px-3 py-2" %>
    </div>

    <div>
      <%= f.submit "Update Profile", class: "bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700" %>
    </div>
  <% end %>
</div>
